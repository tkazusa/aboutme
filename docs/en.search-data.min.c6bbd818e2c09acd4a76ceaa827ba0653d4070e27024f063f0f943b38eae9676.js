'use strict';(function(){const indexCfg={cache:true};indexCfg.doc={id:'id',field:['title','content'],store:['title','href','section'],};const index=FlexSearch.create('balance',indexCfg);window.bookSearchIndex=index;index.add({'id':0,'href':'/aboutme/docs/activities/','title':"Activities",'section':"Docs",'content':"Activities #  "});index.add({'id':1,'href':'/aboutme/posts/license/','title':"SSPL をきっかけに最近の OSS 界隈のライセンス問題について",'section':"Blog",'content':"Elastic 社の Elasticsearch 及び Kibana のライセンス変更に関連して、AWS が Stepping up for a truly open source Elasticsearchで言及した、\u0026ldquo;What this means for the open source community\u0026rdquo; が気になったので少し調べてみた。\n The term “open source” has had a specific meaning since it was coined in 1998. Elastic’s assertions that the SSPL is “free and open” are misleading and wrong. They’re trying to claim the benefits of open source, while chipping away at the very definition of open source itself. Their choice of SSPL belies this. SSPL is a non-open source license designed to look like an open source license, blurring the lines between the two. As the Fedora community states, “consider the SSPL to be ‘Free’ or ‘Open Source’ causes shadow to be cast across all other licenses in the FOSS ecosystem.”\n この引用中にある、SSPL とはどういうライセンスで、Elastic 社の主張はなんであり、何がオープンソースから逸脱してしまうのか。\nここまでの経緯 #  2021/1/15 Doubling down on open, Part II\n Elastic 社が Elasticsearch 及び Kibana を Apache 2.0 ライセンスコードから、Server Side Public License (SSPL) と Elastic License のデュアルライセンスへ移行すると宣言 Elastic 社の主張としては、 Elastic コミュニティや Elastic Cloud やセルフマネージド向けの Elastic ソフトウェアをご利用のお客様へは影響がないとしている  2020/1/20 License Change Clarification\n 今回の変更により、「Amazon Elasticsearch Serviceをはじめ、Elasticのプロダクトを入手し、サービスとして直接販売している事業者には影響があります。」としている SSLP は GPL に基づくライセンス、コピーレフトライセンスだが、OSI認可ライセンスではない Elastic Liccense はコピーレフトがない  BSL などを参考にシンプルにしていく可能性がある、BSL は Open Source Initiative が認めるオープンソースライセンスではないが、OSI創立者の Bruce Persens 氏が 2017 年に一定の評価 BSL を最新のソースコードに 3 年から 5 年くらいの期限付きで設定し、ALv2 へ置き換えるなどを検討    Amazon: NOT OK - why we had to change Elastic licensing\n Amazon Elasticsearch Service は商標違反ではないかと指摘 「Open Distro for Elasticsearch」を出した際に、商用コードを第三者がコピーして使われたと主張  そもそも Open Distro for Elasticsearch を出した理由  Elasticservice のコードにオープンソースとプロプライエタリなコードが混在していて、うかつにビルドして使ってしまうと、ライセンス違反に抵触するかも。 AWSは「Open Distro for Elasticsearch」がフォークではなく、アップストリームにフィードバックし、オリジナルの最新バージョンに追随していくと表明し、オープンソースの流儀に沿っていると主張      この流れを踏まえて、AWS は冒頭の Stepping up for a truly open source Elasticsearch を公開した。\nServer Side Public License とはなんなのか #  SSPLの問題点と主要Linuxディストリビューションから除外されるMongoDBが非常に参考になった。もともと Elasticservice 及び Kibana において ALv2 で提供されていたものが、SSLP と Elastic Lisence で提供されるようになる。この SSLP は GPLv3 をベースにしているライセンスである。オープンソースプロジェクトが、そのソースコードを活用したクラウドベンダーがサービス提供をすると、開発者は報酬を得られない、コミュニティは十分貢献を得ないままである、という課題から提案されたライセンスである。MongoDB はこれをオープンソースライセンスにあたると主張するが、Open Source Definition(OSD) の9条に違反するため、オープンソースライセンスとは認証されることはなさそう、とのこと。実際に、Elasticsearvice の件がブログなどで宣言され始める 2021/1/19 に OSI から The SSPL is Not an Open Source License と改めて声明が出ている。\n Fauxpen source licenses allow a user to view the source code but do not allow other highly important rights protected by the Open Source Definition, such as the right to make use of the program for any field of endeavor.\n SSPL だと好きなところで使える、という権利を侵害するため、オープンソースの定義を満たさないと。余談だが、これ以降の文章でも、この変更によって、Apache ライセンスのもとで提供されていた時代に、オープンソースの流儀にしたがってプロジェクトが運営されると信じて貢献したエンジニアの時間とエネルギーが、プロプライエタリな製品に組み込まれることになっていることへの批判を割と強い口調で書かれている。\nクラウドベンダーへ不満を持つオープンソースカンパニーはあるだろうし、各社がどういう意図でどのようなライセンスを選択し、それが OSS コミュニティへどう影響するかは見ていきたい。\n参考 #   Open Source Initiative  "});index.add({'id':2,'href':'/aboutme/docs/activities/rust/runtime_and_webserver_crate/','title':"Runtime and Webserver Crate",'section':"Rust",'content':"[WIP]Rust 非同期処理と対応した webserver クレイトまとめ #  Rust 1.39 から導入された Future については、Rustの非同期プログラミングをマスターする が詳しい。\n pub trait Future { type Output; fn poll(self: Pin\u0026lt;\u0026amp;mut Self\u0026gt;, cx: \u0026amp;mut Context) -\u0026gt; Poll\u0026lt;Self::Output\u0026gt;; } pub enum Poll\u0026lt;T\u0026gt; { Ready(T), Pending, } というように、Futue::poll メソッドによって「タスクが完了した」あるいは、「タスクが実行中」という状態を返す。\n async キーワードを書くと、書かれた関数は Future トレイトを impl することになる。\n非同期処理には Runtime が必要であり、tokio、async-std、actix-net などがある。\nWeb フレームワーク #   wrap actix-web rocket  "});index.add({'id':3,'href':'/aboutme/docs/activities/rust/rust_docker_container_for_aws_lambda/','title':"Rust Docker Container for a W S Lambda",'section':"Rust",'content':"[WIP]AWS Lambda でのカスタムコンテナイメージで Rust を動かす #  AWS Lambda の新機能 – コンテナイメージのサポート から、手順を確認。\n選択肢は、2つ。\n Amazon Linux ベースのカスタムランタイム用のベースイメージがすでにあって、Lambda ランタイム APIを実装する Alpine や Debian Linux などの独自のベースイメージにした場合には Lamdbaランタイム API を実装する必要がある  関連するツールは下記。\n Runtime interface clients: lambda と関数の間のコミュニケーションを監理する Lambda Runtime Interface Emulator にて、ローカルテストが実施できる  手順は、下記\n AWS Lambda アプリケーションを実装 AWS Lambda のためのコンテナイメージを作成  Dockerfile の作成  Lambda Runtime Interface Client を追加 Lambda Runtime Interface Emulator を追加(オプション) Lambda Runtime Interface Client を起動する entry.sh を作成して、ENTRYPOINT とする     Amazon ECR へプッシュ AWS Lambda 上へデプロイ  Rust Runtime for AWS Lambda とは #   AWS Labs から提供されている Rust のための Runtime 詳しくは Rust Runtime for AWS Lambda Runtime API で実現すること  初期化エラーの通知 Handler の呼び出しとレスポンス or エラーの通知    参考 #   https://github.com/yoshihitoh/rust-lambda-example  "});})();